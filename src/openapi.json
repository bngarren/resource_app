{
  "openapi" : "3.0.3",
  "info" : {
    "title" : "Resource App",
    "description" : "This is for the Resource App server\n",
    "termsOfService" : "http://swagger.io/terms/",
    "version" : "1.0.1"
  },
  "servers" : [ {
    "url" : "https://virtserver.swaggerhub.com/BNGARREN_1/resource-app/1.0.1"
  } ],
  "tags" : [ {
    "name" : "Scan",
    "description" : "Scanning for resources and interactables"
  }, {
    "name" : "Resources",
    "description" : "Access to Resources"
  }, {
    "name" : "Users",
    "description" : "Operations for users"
  } ],
  "paths" : {
    "/scan" : {
      "post" : {
        "summary" : "Performs the scan action for a user",
        "description" : "A user (at a GPS location) scans and receives data about nearby resources and interactables",
        "operationId" : "scan",
        "requestBody" : {
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/scan_body"
              }
            }
          },
          "required" : true
        },
        "responses" : {
          "200" : {
            "description" : "A successful scan returns metadata and interactables.\n\n**Metadata** includes where the scan location occurred, timestamp, etc.\n\n**Interactables** can include resources, machines, etc. Each of which is an object that provides info on the position, distance from user, and whether the user can interact with it (i.e. is close enough to it)\n",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/inline_response_200"
                }
              }
            }
          },
          "400" : {
            "description" : "The request was invalid",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/Error"
                }
              }
            }
          },
          "403" : {
            "description" : "Not authorized",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    }
  },
  "components" : {
    "schemas" : {
      "Coordinate" : {
        "maxItems" : 2,
        "minItems" : 2,
        "type" : "array",
        "items" : {
          "type" : "number",
          "format" : "double"
        }
      },
      "Resource" : {
        "required" : [ "h3Index", "id", "name", "region_id" ],
        "type" : "object",
        "properties" : {
          "id" : {
            "type" : "integer",
            "readOnly" : true
          },
          "name" : {
            "type" : "string"
          },
          "region_id" : {
            "type" : "string"
          },
          "h3Index" : {
            "type" : "string"
          }
        }
      },
      "Interactable" : {
        "required" : [ "distanceFromUser", "position", "userCanInteract" ],
        "type" : "object",
        "properties" : {
          "position" : {
            "$ref" : "#/components/schemas/Coordinate"
          },
          "distanceFromUser" : {
            "minimum" : 0,
            "type" : "integer"
          },
          "userCanInteract" : {
            "type" : "boolean"
          }
        },
        "description" : "An Interactable represents an object in the environment which a user can interact. \n\nThis could include a resource or a machine, for instance.\n\nAn Interactable object details:\n  - Where it is located (latitude, longitude)\n  - How far it is from the user (scan location)\n  - Whether the user can interact with it (i.e. is the user within range?)\n"
      },
      "ScannedResource" : {
        "allOf" : [ {
          "$ref" : "#/components/schemas/Interactable"
        }, {
          "$ref" : "#/components/schemas/Resource"
        }, {
          "type" : "object",
          "properties" : {
            "vertices" : {
              "type" : "array",
              "items" : {
                "type" : "array",
                "items" : {
                  "type" : "number"
                }
              }
            }
          }
        } ]
      },
      "Error" : {
        "required" : [ "code", "message" ],
        "type" : "object",
        "properties" : {
          "code" : {
            "type" : "string"
          },
          "message" : {
            "type" : "string"
          }
        }
      },
      "scan_body" : {
        "required" : [ "userPosition" ],
        "type" : "object",
        "properties" : {
          "userPosition" : {
            "$ref" : "#/components/schemas/Coordinate"
          }
        }
      },
      "inline_response_200" : {
        "required" : [ "interactables", "metadata" ],
        "type" : "object",
        "properties" : {
          "metadata" : {
            "type" : "object"
          },
          "interactables" : {
            "$ref" : "#/components/schemas/inline_response_200_interactables"
          }
        }
      },
      "inline_response_200_interactables" : {
        "type" : "object",
        "properties" : {
          "scannedResources" : {
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/ScannedResource"
            }
          }
        },
        "example" : null
      }
    },
    "responses" : {
      "400BadRequest" : {
        "description" : "The request was invalid",
        "content" : {
          "application/json" : {
            "schema" : {
              "$ref" : "#/components/schemas/Error"
            }
          }
        }
      },
      "403NotAuthorized" : {
        "description" : "Not authorized",
        "content" : {
          "application/json" : {
            "schema" : {
              "$ref" : "#/components/schemas/Error"
            }
          }
        }
      }
    }
  }
}